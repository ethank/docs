---
title: "API Reference"
description: "REST API documentation for Zoo Platform experiments"
icon: "code"
---

## Overview

The Zoo Platform provides a RESTful API for running AI experiments, managing sessions, and tracking analytics.

**Base URL:** `https://api.zoo.uaudio.com/v1`

**Authentication:** All endpoints require a valid Clerk JWT token in the Authorization header.

```bash
Authorization: Bearer <clerk_jwt_token>
```

---

## Core Endpoints

### Run Experiment

Execute an AI experiment with user input and receive assistant response.

<CodeGroup>
```bash cURL
curl -X POST https://api.zoo.uaudio.com/v1/run \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "experiment_slug": "preset-detective",
    "message": "I need a warm analog bass",
    "session_id": "optional-session-id"
  }'
```

```typescript TypeScript
const response = await fetch('https://api.zoo.uaudio.com/v1/run', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${clerkToken}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    experiment_slug: 'preset-detective',
    message: 'I need a warm analog bass',
    session_id: sessionId // optional
  })
});

const data = await response.json();
```

```python Python
import requests

response = requests.post(
    'https://api.zoo.uaudio.com/v1/run',
    headers={
        'Authorization': f'Bearer {clerk_token}',
        'Content-Type': 'application/json'
    },
    json={
        'experiment_slug': 'preset-detective',
        'message': 'I need a warm analog bass',
        'session_id': session_id  # optional
    }
)

data = response.json()
```
</CodeGroup>

**Request Body:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `experiment_slug` | string | Yes | Experiment identifier (e.g., "preset-detective") |
| `message` | string | Yes | User message/question |
| `session_id` | string | No | Continue existing session (creates new if omitted) |

**Response:**

```json
{
  "session_id": "uuid-here",
  "message": {
    "role": "assistant",
    "content": "I found 3 presets that match...",
    "tool_calls": [
      {
        "name": "search_presets",
        "result": [
          {
            "id": "preset-uuid",
            "name": "Thick Bass",
            "plugin": "Moog Minimoog",
            "similarity": 0.89,
            "owned": true
          }
        ]
      }
    ]
  },
  "usage": {
    "prompt_tokens": 245,
    "completion_tokens": 128,
    "total_tokens": 373,
    "cost_usd": 0.00186
  }
}
```

---

### Get Session

Retrieve conversation history for a session.

<CodeGroup>
```bash cURL
curl https://api.zoo.uaudio.com/v1/sessions/SESSION_ID \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

```typescript TypeScript
const response = await fetch(
  `https://api.zoo.uaudio.com/v1/sessions/${sessionId}`,
  {
    headers: {
      'Authorization': `Bearer ${clerkToken}`
    }
  }
);

const session = await response.json();
```
</CodeGroup>

**Response:**

```json
{
  "id": "session-uuid",
  "experiment_id": "preset-detective",
  "user_id": "user-uuid",
  "messages": [
    {
      "role": "user",
      "content": "I need a warm analog bass",
      "timestamp": "2025-01-17T10:00:00Z"
    },
    {
      "role": "assistant",
      "content": "I found 3 presets...",
      "timestamp": "2025-01-17T10:00:02Z"
    }
  ],
  "created_at": "2025-01-17T10:00:00Z",
  "updated_at": "2025-01-17T10:05:00Z"
}
```

---

### Search Presets

Search for presets using natural language or filters.

<CodeGroup>
```bash cURL
curl -X POST https://api.zoo.uaudio.com/v1/presets/search \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "warm analog bass",
    "limit": 5
  }'
```

```typescript TypeScript
const response = await fetch(
  'https://api.zoo.uaudio.com/v1/presets/search',
  {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${clerkToken}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      query: 'warm analog bass',
      limit: 5
    })
  }
);

const presets = await response.json();
```
</CodeGroup>

**Request Body:**

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `query` | string | Yes | Natural language search query |
| `plugin_id` | string | No | Filter by specific plugin |
| `tags` | array | No | Filter by tags |
| `limit` | number | No | Max results (default: 5) |

**Response:**

```json
{
  "presets": [
    {
      "id": "preset-uuid",
      "name": "Thick Bass",
      "description": "Warm analog bass with thick sustain",
      "plugin": {
        "id": "moog-minimoog",
        "name": "Moog Minimoog",
        "manufacturer": "Moog"
      },
      "tags": ["bass", "analog", "warm"],
      "similarity": 0.89,
      "owned": true,
      "price_usd": 299,
      "purchase_url": "https://..."
    }
  ]
}
```

---

### Record User Action

Track user interactions for analytics.

<CodeGroup>
```bash cURL
curl -X POST https://api.zoo.uaudio.com/v1/actions \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "action_type": "preset_click",
    "target_id": "preset-uuid",
    "metadata": {
      "helpful": true
    }
  }'
```

```typescript TypeScript
await fetch('https://api.zoo.uaudio.com/v1/actions', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${clerkToken}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    action_type: 'preset_click',
    target_id: 'preset-uuid',
    metadata: {
      helpful: true
    }
  })
});
```
</CodeGroup>

**Action Types:**
- `preset_click` - User clicked on preset
- `plugin_click` - User clicked on plugin
- `purchase_intent` - User clicked purchase link
- `feedback` - User provided feedback

---

## Tool Functions

These tools are available to AI experiments via function calling.

### search_presets

Search preset database using natural language.

**Parameters:**

```typescript
{
  description: string;      // Natural language description
  tags?: string[];         // Optional tag filters
  pluginId?: string;       // Optional plugin filter
  limit?: number;          // Max results (default: 5)
}
```

**Returns:**

```typescript
{
  presets: Array<{
    id: string;
    name: string;
    description: string;
    plugin: string;
    tags: string[];
    characteristics: object;
    similarity: number;
    owned: boolean;
    price: number;
    purchaseUrl: string;
  }>
}
```

---

### get_plugin_details

Get detailed information about a plugin.

**Parameters:**

```typescript
{
  pluginId: string;  // e.g., "moog-minimoog"
}
```

**Returns:**

```typescript
{
  id: string;
  name: string;
  manufacturer: string;
  category: string;
  description: string;
  price_usd: number;
  purchase_url: string;
  image_url: string;
}
```

---

### get_user_plugins

Get list of plugins owned by current user.

**Parameters:**

```typescript
{}  // No parameters
```

**Returns:**

```typescript
{
  plugins: string[];  // Array of plugin IDs
}
```

---

## Rate Limits

| Tier | Requests/Hour | Requests/Day |
|------|---------------|--------------|
| Free | 10 | 100 |
| Pro | 100 | 1,000 |
| Enterprise | 1,000 | 10,000 |

**Rate Limit Headers:**

```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 87
X-RateLimit-Reset: 1642444800
```

---

## Error Responses

### 400 Bad Request

```json
{
  "error": "Invalid request",
  "details": "experiment_slug is required"
}
```

### 401 Unauthorized

```json
{
  "error": "Unauthorized",
  "details": "Invalid or missing JWT token"
}
```

### 429 Too Many Requests

```json
{
  "error": "Rate limit exceeded",
  "details": "10 requests per hour for free tier",
  "retry_after": 3600
}
```

### 500 Internal Server Error

```json
{
  "error": "Internal server error",
  "details": "An unexpected error occurred",
  "request_id": "req_123abc"
}
```

---

## Webhooks

Subscribe to events via webhooks (coming soon).

**Available Events:**
- `session.created`
- `session.completed`
- `user.action`
- `preset.recommended`

---

## SDKs

<CardGroup cols={2}>
  <Card title="TypeScript/JavaScript" icon="js">
    ```bash
    npm install @uaudio/zoo-client
    ```
  </Card>
  <Card title="Python" icon="python">
    ```bash
    pip install uaudio-zoo
    ```
  </Card>
</CardGroup>

**Coming soon:** Ruby, Go, PHP

---

## Next Steps

<CardGroup cols={2}>
  <Card title="Quick Start" icon="bolt" href="/zoo/quick-start">
    Build platform in 5 days
  </Card>
  <Card title="Architecture" icon="diagram-project" href="/zoo/architecture/overview">
    Technical architecture overview
  </Card>
</CardGroup>
